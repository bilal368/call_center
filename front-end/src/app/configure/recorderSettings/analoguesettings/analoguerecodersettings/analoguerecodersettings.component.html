<div class="head-container">
    <div class="sidenav-options">
        <ng-container>
            <div class="build-div me-2 mt-2" (click)="divFunction('analoguerecoder')"
                [ngStyle]="{'background-color': buildDiv === 'analoguerecoder' ? 'var(--h3)' : '#CCCCCC','color': buildDiv === 'analoguerecoder' ? 'white' : 'var(--h3)'}">
                <label class="tab-text mt-2">Analog Recoder Settings</label>
            </div>
        </ng-container>
        <ng-container>
            <div class="build-div me-2 mt-2" (click)="divFunction('recorderchannel')"
                [ngStyle]="{'background-color': buildDiv === 'recorderchannel' ? 'var(--h3)' : '#CCCCCC','color': buildDiv === 'recorderchannel' ? 'white' : 'var(--h3)'}">
                <label class="tab-text mt-2">Analog Channel Mapping</label>
            </div>
        </ng-container>
        <ng-container>
            <div class="build-div me-2 mt-2" (click)="divFunction('voltageenergy')"
                [ngStyle]="{'background-color': buildDiv === 'voltageenergy' ? 'var(--h3)' : '#CCCCCC','color': buildDiv === 'voltageenergy' ? 'white' : 'var(--h3)'}">
                <label class="tab-text mt-2">Voltage/Energy</label>
            </div>
        </ng-container>
    </div>
    @if (buildDiv=='analoguerecoder') {
    <div style="color: var(--tabColor);">
        <form [formGroup]="myForm" (ngSubmit)="savebutton()">
            <div style=" display: flex;">

                <div class="leftFormstyle">
                    <div class="textFromfeild">
                        <label class="headtext">Data Driver</label>
                        <input type="text" class="form-control-username" required="required" name="DataPath"
                            id="DataPath" formControlName="DataPath" placeholder="Data Driver" id="placeholderstyle">
                        @if (myForm.controls['DataPath'].invalid && myForm.controls['DataPath'].touched) {
                        <div class="validtionstyle">
                            <small class="text-danger">Datapath is required</small>
                        </div>
                        }



                    </div>
                    <div class="textFromfeild">
                        <label class="headtext">Maximum Filesize</label>
                        <input type="text" class="form-control-username" required="required" name="Maxfilesize"
                            id="Maxfilesize" formControlName="Maxfilesize" placeholder="Maxfilesize"
                            id="placeholderstyle">

                        @if (myForm.controls['Maxfilesize'].invalid &&
                        myForm.controls['Maxfilesize'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">Maximum Filesize required</small>
                        </div>
                        }
                    </div>
                    <div class="textFromfeild">
                        <label class="headLable">Media Forward IP</label>
                        <input type="text" class="form-control-username" required="required" name="localipaddress"
                            id="localipaddress" formControlName="mediafwdip" placeholder="Media Forward IP"
                            style="border-color:#89AECF; border-style: solid;">
                        @if (myForm.controls['mediafwdip'].invalid && myForm.controls['mediafwdip'].touched)
                        {
                        <div style=" min-height: 5px; display: flex;
                            align-items: center;">
                            <small class="text-danger">Media Forward IP is required</small>
                        </div>
                        }
                    </div>
                    <div class="textFromfeild">
                        <label class="headtext">Missed Call</label>
                        <input type="text" class="form-control-username" required="required" name="Misscall"
                            id="Misscall" formControlName="Misscall" placeholder="Misscall" id="placeholderstyle">

                        @if (myForm.controls['Misscall'].invalid &&
                        myForm.controls['Misscall'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">Missed Call required</small>
                        </div>
                        }
                    </div>
                    <div class="textFromfeild">
                        <label class="headtext">Voltage Capture</label>
                        <input type="text" class="form-control-username" required="required" name="Voltage" id="Voltage"
                            formControlName="Voltage" placeholder="Voltage capture" id="placeholderstyle">

                        @if (myForm.controls['Voltage'].invalid &&
                        myForm.controls['Voltage'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">Voltage Capture required</small>
                        </div>
                        }
                    </div>
                    <div style=" display: flex;
                    flex-direction: column;
                    height: 90px;
                    position: relative;">
                        <label class="headLable">Selection Mode</label>

                        <div style="justify-content: space-around;font-weight: 500;color: black;font-size: 16px;">
                            <label>
                                <input type="radio" name="extension" formControlName="extension" value="All" checked>
                                <span style="padding-left: 5px;">All</span>
                            </label>
                            <label style="padding-left: 10px;padding-right: 10px;">
                                <input type="radio" name="extension" formControlName="extension" value="Individual">
                                <span style="padding-left: 5px;">Individual</span>
                            </label>


                        </div>


                    </div>
                </div>
                <div class="rightForm">
                    <div class="textFromfeild">
                        <label class="headtext">Log Status</label>
                        <mat-select formControlName="logstatus" class="dropdowntext">
                            <mat-option value="Off">OFF
                            </mat-option>
                            <mat-option value="0">FatalError
                            </mat-option>
                            <mat-option value="10">GENERAL-ERROR
                            </mat-option>
                            <mat-option value="20">Warning
                            </mat-option>
                            <mat-option value="30">Information
                            </mat-option>
                            <mat-option value="40">Debug
                            </mat-option>
                        </mat-select>
                    </div>
                    <div class="textFromfeild">
                        <label class="headtext">Channel Index</label>
                        <input type="text" class="form-control-username" required="required" name="chindex" id="chindex"
                            formControlName="chindex" placeholder="Channel Index" id="placeholderstyle">
                        @if (myForm.controls['chindex'].invalid && myForm.controls['chindex'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">CH Index is required</small>
                        </div>
                        }

                    </div>
                    <div class="textFromfeild">
                        <label class="headLable">Media Proxy IP</label>
                        <input type="text" class="form-control-username" required="required" name="localipaddress"
                            id="localipaddress" formControlName="mediaproxy" placeholder="Media Proxy IP"
                            style="border-color:#89AECF; border-style: solid;">
                        @if (myForm.controls['mediaproxy'].invalid && myForm.controls['mediaproxy'].touched)
                        {
                        <div style=" min-height: 5px; display: flex;
                            align-items: center;">
                            <small class="text-danger">Media Proxy IP is required</small>
                        </div>
                        }
                    </div>
                    <div class="textFromfeild">
                        <label class="headtext">Analog Channel</label>
                        <input type="text" class="form-control-username" required="required" name="ACH" id="ACH"
                            formControlName="ACH" placeholder="ACH" id="placeholderstyle">
                        @if (myForm.controls['ACH'].invalid && myForm.controls['ACH'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">Analog Channel is required</small>
                        </div>
                        }

                    </div>
                    <!-- <div class="textFromfeild">
                        <label class="headtext">Enable Voicefiles Split</label>
                        <input type="text" class="form-control-username" required="required" name="Enablevoice"
                            id="Enablevoice" formControlName="Enablevoice" placeholder="Enable voice files split"
                            id="placeholderstyle">
                        @if (myForm.controls['Enablevoice'].invalid && myForm.controls['Enablevoice'].touched)
                        {
                        <div class="validtionstyle">
                            <small class="text-danger">Enable voice files split is required</small>
                        </div>
                        }

                    </div> -->
                    <div style=" display: flex;
                    flex-direction: column;
                    height: 90px;
                    position: relative;">
                        <label class="headLable">Enable Voicefiles Split</label>

                        <div style="justify-content: space-around;font-weight: 500;color: black;font-size: 16px;">
                            <label>
                                <input type="radio" name="Enablevoice" formControlName="Enablevoice" value="1" checked>
                                <span style="padding-left: 5px;">Yes</span>
                            </label>
                            <label style="padding-left: 10px;padding-right: 10px;">
                                <input type="radio" name="Enablevoice" formControlName="Enablevoice" value="0">
                                <span style="padding-left: 5px;">No</span>
                            </label>


                        </div>


                    </div>


                    <div class="example-button-row">
                        <button mat-button class="custom-button"  matTooltip="Save settings">
                            Save
                        </button>
                    </div>
                </div>
            </div>

        </form>
    </div>
    }
    @if (buildDiv=='recorderchannel') {
    <div style="color: var(--tabColor);height: 600px;">
        <mat-toolbar style="justify-content: flex-end;">
            <div style="display: flex; gap: 10px;justify-content: flex-end;margin-right: 10px;">

                <button mat-button mat-button class="map-channel-btn" (click)="openDialog(true,null)">
                    <mat-icon>add_call</mat-icon>
                    Map Channel</button>

                <!-- <button mat-button mat-button class="map-channel-btn" >
                        <mat-icon>upload_file</mat-icon>
                        Import</button> -->
                <button mat-button mat-button class="map-channel-btn"
                    (click)="deleteFuntion('Are you sure you want to delete channel mapping?')">
                    <mat-icon>delete</mat-icon>
                    Delete</button>

                <div class="excelDiv btn" [matTooltip]="toolTips.DownloadReports|translate" [matMenuTriggerFor]="menu4">
                    <mat-icon class="icon">download_2</mat-icon>
                    <span class="text">Report</span>
                </div>

                <mat-menu #menu4="matMenu">
                    <button class="downloadBtn align-item" mat-menu-item (click)="exportToFile('Excel')">
                        <div style="justify-content: space-around;display: flex;">
                            <div>Excel</div>
                            <div>
                                <span class="material-symbols-outlined">article</span>
                            </div>
                        </div>
                    </button>
                    <button class="downloadBtn align-item" mat-menu-item (click)="exportToFile('PDF')">
                        <div style="justify-content: space-around;display: flex;">
                            <div>PDF</div>
                            <div>
                                <span class="material-symbols-outlined">picture_as_pdf</span>
                            </div>
                        </div>
                    </button>
                    <button hidden class="downloadBtn align-item" mat-menu-item>
                        <span>TIFF</span>
                        <span class="material-symbols-outlined">perm_media</span>
                    </button>
                    <button hidden class="downloadBtn align-item" mat-menu-item>
                        <span>Web Archive</span>
                        <span class="material-symbols-outlined">install_desktop</span>
                    </button>
                </mat-menu>
            </div>
        </mat-toolbar>

        <div class="mat-elevation-z8" style="top: 10%;overflow-y: auto;">




            <table mat-table [dataSource]="dataSource" matSort>

                <!-- <mat-checkbox class="custom-white-checkbox" color="primary" [(ngModel)]="selectAll"
                    (change)="toggleSelectAll($event.checked)" (click)="$event.stopPropagation()">
                </mat-checkbox> -->

                <!-- ID Column -->
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox class="custom-white-checkbox" [(ngModel)]="selectAll"
                            (change)="toggleSelectAll($event.checked)" (click)="$event.stopPropagation()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox color="primary" [checked]="isRoleSelected(element.ChannelId)"
                            (change)="toggleRoleSelection(element.ChannelId, $event.checked)"
                            (click)="$event.stopPropagation()">
                        </mat-checkbox>
                    </td>
                </ng-container>
                <!-- <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef>Sl.No</th>
                    <td mat-cell *matCellDef="let element">{{element.recorderChannelMappingId}}</td>
                </ng-container> -->

                <!-- Name Column -->
                <ng-container matColumnDef="Channel">
                    <th mat-header-cell *matHeaderCellDef>Channel</th>
                    <td mat-cell *matCellDef="let element">{{element.Channel}}</td>
                </ng-container>

                <!-- Progress Column -->
                <ng-container matColumnDef="extension">
                    <th mat-header-cell *matHeaderCellDef>Voltage
                    <th>
                    <td mat-cell *matCellDef="let element">{{element.VOLTAGE}}</td>
                </ng-container>

                <ng-container matColumnDef="controler">
                    <th mat-header-cell *matHeaderCellDef>Control
                    <th>
                    <td mat-cell *matCellDef="let element">{{element.CONTROL}}</td>
                </ng-container>

                <ng-container matColumnDef="bergin">
                    <th mat-header-cell *matHeaderCellDef>Bergin
                    <th>
                    <td mat-cell *matCellDef="let element">{{element.BARGEIN}}</td>
                </ng-container>
                <ng-container matColumnDef="ring">
                    <th mat-header-cell *matHeaderCellDef>Ringcount
                    <th>
                    <td mat-cell *matCellDef="let element">{{element.CALLERID_RINGCOUNT}}</td>
                </ng-container>

                <!-- Color Column -->
                <!-- <ng-container matColumnDef="password">
                        <th mat-header-cell *matHeaderCellDef>Password</th>
                        <td mat-cell *matCellDef="let element">{{element.password}}</td>
                    </ng-container> -->
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef>Action</th>
                    <td mat-cell *matCellDef="let element">
                        <mat-icon color="var(--h3)" style="cursor: pointer;">edit</mat-icon>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <!-- <div>
                    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"
                        aria-label="Select page">
                    </mat-paginator>
                </div> -->
            <mat-toolbar class="pagination-toolbar">
                <div class="page-info">
                    TotalRecords
                    :
                    {{ TotalRecords }}
                </div>
                <span class="example-spacer"></span>
                <div class="page-info">
                    Records Per Page
                </div>
                <mat-select class="form-control me-4" style="width:100px" [(ngModel)]="limit"
                    (selectionChange)="onItemsPerPageChange($event)">

                    <mat-option class="goto-check" [value]="10">10</mat-option>
                    <mat-option class="goto-check" value="25">25</mat-option>
                    <mat-option class="goto-check" value="50">50</mat-option>
                    <mat-option class="goto-check" value="100">100</mat-option>
                </mat-select>

                <div class="page-info">
                    Page
                    <mat-select class="form-control" style="width: 72px;" [(ngModel)]="currentPage"
                        (selectionChange)="goToPage($event)">
                        @for (page of getPagesArray(); track $index) {
                        <mat-option style="width: 80px;" [value]="page">
                            {{ page }}
                        </mat-option>
                        }
                    </mat-select>
                    of {{ totalPages }}
                </div>


                <div [dir]="'ltr'">
                    <button mat-mini-fab class="next-button me-2" (click)="previousPage()">
                        <mat-icon>chevron_left</mat-icon>
                    </button>
                    <button mat-mini-fab class="next-button me-2" (click)=" nextPage()">
                        <mat-icon>chevron_right</mat-icon>
                    </button>

                </div>
            </mat-toolbar>
        </div>
    </div>
    }
    @if (buildDiv=='voltageenergy') {



    <app-voltageenergygraph></app-voltageenergygraph>

    }
</div>